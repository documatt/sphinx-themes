[testenv:docs]
description = Build docs
deps = -rdocs/requirements.txt
commands =
    ; -W turn warnings into errors
    ; -q be quiet
    sphinx-build -b html -D html_theme=sphinx_documatt_theme -D html_theme_path=../sphinx_documatt_theme docs _build/html

[testenv:build_documatt]
description = Package and release sphinx_documatt_theme
isolated_build = True
skip_install = True
deps =
    build==1.0.3
change_dir = sphinx_documatt_theme
allowlist_externals =
    rm
commands =
    rm -rf dist
    python -m build

[testenv:publish_documatt]
description =
    Publish the package you have been developing to a package index server.
    By default, it uses testpypi. If you really want to publish your package
    to be publicly accessible in PyPI, use the `-- --repository pypi` option.
skip_install = True
change_dir = sphinx_documatt_theme
passenv =
    TWINE_USERNAME
    TWINE_PASSWORD
    TWINE_REPOSITORY
deps = twine==4.0.2
commands =
    python -m twine check dist/*
    python -m twine upload {posargs:--repository {env:TWINE_REPOSITORY:testpypi}} dist/*