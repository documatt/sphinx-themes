// *** Sphinx HTML ************************************************************
// Fix Sphinx HTML builder markup

.sphinx-body {

  // *** Sections *************************************************************
  // <div class="section"> generated by Sphinx

  .section:first-child {
    margin: 0;
    padding: 0; // resets Bulma's section padding
  }

  .section:not(:first-child) {
    margin: 2rem 0;
    padding: 0; // resets Bulma's section padding
  }

  // H2 or smaller section, not the H1 (document title)
  // every RST section in inside <section>
  // "section section" because document title is also in <section>
  section section {
    margin-top: 1.5rem;
  }

  // *** Headings *************************************************************

  $blue_color: #0c7cba;
  $blue_color_hover: lighten($blue_color, 20);

  // all headings in blue and without underline
  h1, h2, h3, h4, h5, h6 {
    // !important because
    //    $content-heading-color: $link_color;
    // or even better
    //    $content-heading-color: $dm-blue;
    // doesn't work for me
    color: $blue_color !important;
    border-bottom: none;

    a {
      color: $blue_color !important;
      text-decoration: none;
      border-bottom: none;

      &:hover {
        color: $blue_color_hover !important;
        text-decoration: none;
        border-bottom: none;
      }
    }
  }

  // H1 needs to be larger
  h1 {
    // !important because I don't know how to override Bulma H1 size via variables
    font-size: 2.25em !important;
  }

  // *** Permalink anchors ****************************************************

  // Permalink anchor next to the headings
  h1, h2, h3, h4, h5, h6 {
    a.headerlink {
      // Initially hidden
      visibility: hidden;
      text-decoration: none;
      padding-left: 0.5rem;
      color: $blue_color_hover !important;
    }
  }

  // Visible only if mouse over heading
  h1:hover > a.headerlink,
  h2:hover > a.headerlink,
  h3:hover > a.headerlink,
  h4:hover > a.headerlink,
  h5:hover > a.headerlink,
  h6:hover > a.headerlink {
    visibility: visible;
  }

  // *** Toctree **************************************************************

  .toctree-wrapper.compound {
    margin: 2rem 0;

    .caption {
      font-weight: bold;
      color: $blue_color;
      font-size: 110%;
    }
  }

  // *** Epigraph *************************************************************

  blockquote.epigraph {
    background: none !important;
    font-weight: bold !important;
    font-size: 115% !important;
    border: none !important;
    padding: 0 !important;
  }

  // *** Links ****************************************************************

  $link_color: #717171;
  $link_color_hover: lighten($link_color, 20);

  a {
    // color: no change, use default text color
    text-decoration: none;
    border-bottom: 2px solid $link_color_hover;

    &:hover {
      color: $link_color_hover;
      border-bottom: 2px solid $link_color_hover;
    }
  }

  // all external links with icon after
  a.reference.external::after {
    content: url("../img/external-link.png");
  }

  // but for images withing links
  a.reference.external.image-reference::after {
    content: none;
  }

  a.footnote-reference {
    vertical-align: super;
    font-size: smaller;
    font-weight: bold;
    color: $link_color;

    &:hover {
      color: $link_color_hover;
    }
  }

  // *** Admonition-like ******************************************************

  .topic,
  .admonition,
  .sidebar {
    background-color: whitesmoke;
    border-left: 5px solid #dbdbdb;
    padding: 1.25em 1.5em;
    margin: 1em;
    clear: right; // clearfix if topic/adminitions/sidebars is followed by another one
  }

  .sidebar {
    float: right;
    width: 35%;
    font-size: smaller;
  }

  .topic-title,
  .sidebar-title,
  .admonition-title {
    font-weight: bold;
  }

  // *** Roles ****************************************************************

  .rubric {
    font-weight: bold;
    color: $blue_color;
  }

  // Fix :download: look
  a.download code {
    font-family: $family-primary !important;
    background: none !important;
    color: #4a4a4a;
    font-size: 1.25rem !important;
    font-weight: normal !important;
    padding: 0 !important;
  }

  // *** Code examples ********************************************************

  code {
    color: #4a4a4a;
  }

  code.literal, // literal block (::) and inline literal (``foo``)
  div.highlight { // code-block::
    border-radius: 5px;
    font-size: 80%;
    margin-bottom: 1em;
    
    pre {
      white-space: pre-wrap;
      word-break: break-all;
    }
  }

  // inline literal (``foo``)
  code.literal span.pre {
    font-size: 85%;
  }

  .literal-block-wrapper {
    .code-block-caption {
      font-style: italic;
      color: gray;
    }

    table td,
    table th {
      padding: 0;
    }
  }

  // Bulma form/file.sass:14 consider .file as a HTML file input field and displays it as a flexbox.
  code.file {
    display: inline;
  }

  // code-block with line numbering as tables
  table.highlighttable {
    background-color: whitesmoke;

    td {
      padding: 0;
    }

    pre {
      font-size: 17px;
      line-height: 21px;
      padding: 0;
    }
  }

  // code-block with line numbering as inlines (<span>)
  .highlight .linenos {
    color: #cecece;
    font-size: 90%;
    padding-right: 15px;
    // prevent dragging to select line number text
    user-select: none;
  }

  // *** Glossary ************************************************************

  dt {
    margin: 1rem 0 0 0;
    font-style: italic;
  }

  // *** Images **************************************************************

  img.align-left {
    float: left;
    margin: 1rem 1rem 1rem 0;
  }

  img.align-right {
    float: right;
    margin: 1rem 0 1rem 1rem;
  }

  img.align-center {
    display: block;
    margin-left: auto;
    margin-right: auto;
  }

  // Clearing floated images before structural elements
  h1, h2, h3, h4, h5, h6,
  hr,
  .admonition,
  .rubric {
    clear: both;
  }

  // *** Keyboard shortcuts ***************************************************

  // sole shortcut like :kbd:`F12` is
  // <kbd class="kbd docutils literal notranslate">Space</kbd>

  // compound shortcut like :kbd:`Ctrl-F12` is
  // <kbd class="kbd compound docutils literal notranslate">
  //    <kbd class="kbd docutils literal notranslate">Ctrl</kbd>-<kbd class="kbd docutils literal notranslate">S</kbd>
  //  </kbd>

  kbd.compound kbd,
  kbd:not(.compound) {
    display: inline-block;
    border: 1px solid #ccc;
    border-radius: 4px;
    padding: 0.1em 0.5em;
    margin: 0 0.2em;
    box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 2px #fff inset;
    background-color: #f7f7f7;
    font-size: 80%;
  }
}
